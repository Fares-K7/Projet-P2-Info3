2025-2026 ‚Äì Pr√©-ING2
CY Tech
MEF-D

Gregoire Chaumont
Kassar Fares
Carr√© Tomas

Ce projet, intitul√© "C-WildWater", vise √† d√©velopper une solution logicielle performante pour analyser un r√©seau de distribution d'eau fictif mais r√©aliste. 
L'objectif √©tait de traiter un fichier de donn√©es volumineux  pour extraire des statistiques sur les usines de traitement et calculer les pertes d'eau.

L'application combine un script Shell pour l'interface utilisateur et l'automatisation, et un programme en langage C pour le traitement intensif des donn√©es et la gestion de la m√©moire.

Nous avons s√©par√© le travail de mani√®re simple et efficace.

Gr√©goire Chaumont **Architecture C & AVL (Histo)**

<br>- Conception des structures `Usine` et `AVL`.<br>

<br>- Impl√©mentation du parsing CSV (d√©tection des types de lignes).<br>

<br>- Gestion de la m√©moire (allocation/lib√©ration). |
| **√âtudiant B** | **Scripting Shell & Gnuplot**<br>

<br>- Cr√©ation du script `myScript.sh` (gestion des arguments, aide).<br>

<br>- Int√©gration de Gnuplot pour la g√©n√©ration des graphiques.<br>

<br>- Compilation automatique et gestion des erreurs. |
| **√âtudiant C** | **Algorithme de Fuites (Leaks) & Makefile**<br>

<br>- Conception de la structure de graphe pour la distribution.<br>

<br>- Impl√©mentation du parcours r√©cursif pour le calcul des pertes.<br>

<br>- R√©daction du `Makefile` et documentation. |

2.2 Planning de r√©alisation 

* **Semaine 1 :** Analyse du sujet, mise en place du Git et du squelette du projet (`Makefile`, `main.c`, `myScript.sh`).
* **Semaine 2 :** Impl√©mentation de l'AVL et de la lecture du CSV. Premiers tests sur le module `histo`.
* **Semaine 3 :** D√©veloppement du module `leaks` (gestion des listes d'adjacence). Script Gnuplot.
* **Semaine 4 :** D√©bogage, gestion des fuites m√©moires (Valgrind), nettoyage du code et r√©daction du rapport.

---

## 3. Choix Techniques

* **Structure de donn√©es (Histo) :** Nous avons choisi un **AVL** (Arbre Binaire de Recherche √âquilibr√©) pour stocker les usines. Cela permet une insertion et une recherche en , indispensable vu le nombre d'entr√©es.
* 
**Lecture du CSV :** Pour limiter l'empreinte m√©moire, nous ne chargeons pas tout le fichier. Nous lisons ligne par ligne (`fgets`) et mettons √† jour l'AVL √† la vol√©e.


* **Tri des donn√©es :** Le tri inverse demand√© pour Gnuplot est effectu√© directement lors du parcours de l'AVL (Droite -> Racine -> Gauche) lors de l'√©criture du fichier de sortie.

---

## 4. Probl√®mes Rencontr√©s et Solutions

Voici les principales difficult√©s que nous avons surmont√©es durant le projet :

### 4.1 La structure du fichier CSV

* **Probl√®me :** Les lignes du fichier CSV sont m√©lang√©es. Une usine peut √™tre d√©finie √† la ligne 100, mais recevoir de l'eau d'une source d√©finie √† la ligne 5000.


* **Solution :** Nous avons utilis√© une approche "Lazy creation". Si on rencontre un lien "Source -> Usine" avant la d√©finition de l'usine, on cr√©e l'usine dans l'AVL avec des valeurs par d√©faut. Ses infos (capacit√©) sont mises √† jour plus tard quand on rencontre sa ligne de d√©finition.

### 4.2 Gestion des caract√®res de fin de ligne

* **Probl√®me :** Lors de la lecture avec `fgets` et le d√©coupage avec `strtok`, les identifiants en fin de ligne r√©cup√©raient le caract√®re invisible `\n` ou `\r`, ce qui faussait les comparaisons de cha√Ænes (`strcmp`).
* **Solution :** Cr√©ation d'une fonction utilitaire `trimNewline()` qui nettoie syst√©matiquement les buffers de lecture.

### 4.3 Optimisation Gnuplot

* **Probl√®me :** Gnuplot ne g√©rait pas correctement les barres horizontales avec nos premi√®res donn√©es.
* **Solution :** Ajustement du script Gnuplot pour utiliser le style `boxxyerror` ou `histograms` et rotation des √©tiquettes (labels) pour la lisibilit√©.

---

5. Limitations Fonctionnelles 

√Ä la date du rendu, voici l'√©tat du projet :

* ‚úÖ **Fonctionnalit√© Histo :** Op√©rationnelle √† 100% (Max, Src, Real). Les graphiques sont g√©n√©r√©s correctement.
* ‚úÖ **Fonctionnalit√© Leaks :** Op√©rationnelle. Le calcul des fuites se fait bien sur l'ensemble du r√©seau aval.
* ‚ö†Ô∏è **Performance Leaks :** Sur des tr√®s grands r√©seaux avals, le temps de traitement peut prendre quelques secondes du fait de la recherche des enfants dans le fichier (si non optimis√© par un second AVL comme sugg√©r√©).
* ‚ùå **Bonus :** L'histogramme empil√© (3 couleurs) mentionn√© dans les bonus  n'a pas √©t√© impl√©ment√© par manque de temps.



---

6. Exemples de r√©sultats 

*(Ins√©rez ici les images g√©n√©r√©es par votre programme)*

**Figure 1 :** Histogramme des capacit√©s (Mode `histo max`)
*(Ins√©rer image ici)*

**Figure 2 :** Extrait du terminal lors d'un calcul de fuite (`leaks`)

```text
$ ./myScript.sh leaks "Facility complex #RH400057F"
Compilation... OK.
Calcul des fuites pour l'usine : Facility complex #RH400057F
[...]
Resultat : 45.2 M.m3 de pertes.
Dur√©e : 2 secondes.

```

---

## 7. Conclusion

Ce projet nous a permis de comprendre l'importance des structures de donn√©es adapt√©es (AVL) pour traiter de grands volumes de donn√©es. La s√©paration Shell/C est une architecture puissante qui allie flexibilit√© et performance. Nous avons √©galement appris √† travailler en √©quipe avec Git, en g√©rant les conflits et en synchronisant nos avanc√©es.

---

### üí° Conseils pour ton PDF :

1. **Personnalise la partie "Limitations" :** Si tu as r√©ussi les bonus, mets-les en vert ! Si tu as un bug connu (ex: √ßa plante si le fichier n'existe pas), sois honn√™te et mets-le en orange. Les profs pr√©f√®rent l'honn√™tet√© √† un bug "cach√©".
2. 
**Captures d'√©cran :** Le sujet demande explicitement des preuves visuelles dans le dossier `tests` et dans le PDF. Fais des captures de tes graphes.


3. **Mise en forme :** Utilise une police lisible (Arial, Roboto), justifie le texte, et mets des titres clairs.
